<!-- Load Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = {
    darkMode: 'class',
  };
</script>

<!-- Light/Dark Theme Styling -->
<style>
  body.dark {
    background-color: #121212;
    color: white;
  }
  body.light {
    background-color: white;
    color: black;
  }
  #theme-toggle {
    position: fixed;
    top: 10px;
    right: 10px;
    z-index: 1000;
    border-radius: 9999px;
  }
</style>

<body class="light transition-colors duration-300">

  <!-- Theme Toggle -->
  <button id="theme-toggle" class="bg-gray-700 text-white px-4 py-2 m-2 rounded-full">
    🌙 Dark Mode
  </button>

  <!-- Navbar -->
  <nav id="navbar" class="bg-white dark:bg-gray-800 shadow-md px-4 py-2 flex space-x-4 items-center">
    <a href="/" class="text-lg font-bold text-gray-800 dark:text-white">🔥 Wildfire AI</a>
    <!-- Links from config.yml will be injected here -->
  </nav>

  <!-- Page Content -->
  <main class="container mx-auto p-4">
    {{ content }}
  </main>

  <!-- Theme Toggle Script -->
  <script>
    const toggleButton = document.getElementById("theme-toggle");
    const body = document.body;

    function setTheme(theme) {
      body.classList.remove("light", "dark");
      body.classList.add(theme);
      localStorage.setItem("theme", theme);
      toggleButton.innerHTML = theme === "dark" ? "☀️ Light Mode" : "🌙 Dark Mode";
    }

    const savedTheme = localStorage.getItem("theme") || "light";
    setTheme(savedTheme);

    toggleButton.addEventListener("click", () => {
      const newTheme = body.classList.contains("dark") ? "light" : "dark";
      setTheme(newTheme);
    });
  </script>

  <!-- Load Navbar Links from YAML -->
  <script type="module">
    import yaml from "https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/+esm";

    // Mock config.yml content (replace this with a fetch to actual file if hosted)
    const configYML = `
header_pages:
  - name: Home
    link: /
  - name: Dashboard
    link: /dashboard
  - name: Models
    link: /models
  - name: About
    link: /about
`;

    const config = yaml.load(configYML);
    const navbar = document.getElementById("navbar");

    config.header_pages.forEach(page => {
      const link = document.createElement("a");
      link.href = page.link;
      link.textContent = page.name;
      link.className = "text-gray-700 dark:text-gray-300 hover:underline";
      navbar.appendChild(link);
    });
  </script>
</body>
